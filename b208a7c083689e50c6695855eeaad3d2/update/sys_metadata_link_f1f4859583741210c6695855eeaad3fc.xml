<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>b270865d5352301089abddeeff7b12d8</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Set default values for table access policy fields for help and guidance tables&lt;/description&gt;
        &lt;name&gt;Update table access policy fields&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[resetAccessPolicyDefaults();

function resetAccessPolicyDefaults() {
	var tables = ["help_answer","help_content","help_guidance","help_guidance_step","help_guidance_task","help_m2m_step_dependency","help_question","help_setup_dependency","help_user_interaction","help_user_interaction_log","help_user_interaction_step"];
		
	var fields = [
		{ name: "read_access", defaultValue: "true" },
		{ name: "create_access", defaultValue: "true" },
		{ name: "update_access", defaultValue: "true" },
		{ name: "delete_access", defaultValue: "true" },
		{ name: "ws_access", defaultValue: "true" },
		{ name: "alter_access", defaultValue: "true" },
		{ name: "actions_access", defaultValue: "true" },
		{ name: "client_scripts_access", defaultValue: "true" },
		{ name: "configuration_access", defaultValue: "true" }
	];
	
	updateDictionary(fields);
	
	// Reset all default values in the dictionary for the *_access fields on help and guidance tables
	function updateDictionary(fields) {
		// Reset default value in the dictionary
		var tableRec = new GlideRecord('sys_db_object');
		tableRec.addQuery('name', 'IN', tables.join(",")); 
		tableRec.query();
		while (tableRec.next()) {
			for (var fieldIndex in fields) {
				var field = fields[fieldIndex];
				if (field &amp;&amp; field.name) {	
					if(!(tableRec.name == "help_guidance_task" &amp;&amp; field.name == "delete_access"))
						tableRec[field.name] = field.defaultValue;
				}
			}
			tableRec.update();
		}
	}
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2021-08-30 02:42:46&lt;/sys_created_on&gt;
        &lt;sys_id&gt;b270865d5352301089abddeeff7b12d8&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Update table access policy fields&lt;/sys_name&gt;
        &lt;sys_package display_value="ServiceNow Help and Guidance Backend" source="com.glide.sn_help"&gt;cab9f0283cf1311068bcf327dfe37f11&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_b270865d5352301089abddeeff7b12d8&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2021-10-04 05:16:06&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 09:39:38</sys_created_on>
        <sys_id>f1f4859583741210c6695855eeaad3fc</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Update table access policy fields</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_f1f4859583741210c6695855eeaad3fc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 09:39:38</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
