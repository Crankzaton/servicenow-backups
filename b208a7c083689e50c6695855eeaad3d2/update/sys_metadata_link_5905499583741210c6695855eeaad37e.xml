<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>b88a281653a2101041bbddeeff7b1269</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Existing response templates are associated with all active response template channels during
      upgrade. Note, new templates are not associated with any channel be default. The user must specify which channels
      they want after template creation.
    &lt;/description&gt;
        &lt;name&gt;Link active response channels&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[linkActiveResponseChannels();
function linkActiveResponseChannels() {
	var templatesGr = new GlideRecord('sn_templated_snip_note_template');
	var channelsGr = new GlideRecord('sn_templated_snip_channel');
	var m2mGr = new GlideRecord('m2m_response_template_to_channel');
	var channelIds = [];

	channelsGr.query();
	while(channelsGr.next()) {
		channelIds.push(channelsGr.getUniqueValue());
	}

	templatesGr.query();

	while(templatesGr.next()) {
		for (var i = 0; i &lt; channelIds.length; i++) {
			var channelId = channelIds[i];
			m2mGr.initialize();
			m2mGr.setValue('sys_scope', templatesGr.getValue('sys_scope'));
			m2mGr.setValue('channel', channelId);
			m2mGr.setValue('response_template', templatesGr.getUniqueValue());
			m2mGr.insert();
		}
	}
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2020-08-12 16:40:24&lt;/sys_created_on&gt;
        &lt;sys_id&gt;b88a281653a2101041bbddeeff7b1269&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;17&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Link active response channels&lt;/sys_name&gt;
        &lt;sys_package display_value="Templated Snippets" source="sn_templated_snip"&gt;2d3597c80b67320036e62c7885673a43&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Templated Snippets"&gt;2d3597c80b67320036e62c7885673a43&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_b88a281653a2101041bbddeeff7b1269&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2020-08-13 17:56:50&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 09:39:53</sys_created_on>
        <sys_id>5905499583741210c6695855eeaad37e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Link active response channels</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_5905499583741210c6695855eeaad37e</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 09:39:53</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
