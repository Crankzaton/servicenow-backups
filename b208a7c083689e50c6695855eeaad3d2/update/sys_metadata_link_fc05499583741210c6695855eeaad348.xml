<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>b820089c931032003706dfa5e57ffb49</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;With Generic Scoring framework, some of the configuration entity like Application Profile, Application Score etc need to be labed generically. This Fix script takes care of these label changes for table and reference fields.&lt;/description&gt;
        &lt;name&gt;Update Fields Labels &lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[var tableLabelChanges = [
	{name:'apm_app_score', label:'CI Score' }, //Application Score
	{name:'apm_app_indicator_score', label:'Indicator Score'}, //Application Indicator Score
	{name:'apm_application_profile', label:'Profile'}, //Application Profile
	{name:'apm_application_profile_indicator', label:'Profile Indicator'},//Application Profile Indicator
	{name:'apm_metric', label:'Indicator'} //Application Indicator
];

var fieldLabelChanges = [
	{name:'apm_app_indicator_score', element:'apm_application_profile_indicator', column_label:'Indicator'},
	{name:'apm_app_indicator_score', element:'cmdb_ci_business_app', column_label:'Configuration Item'},
	{name:'apm_app_score', element:'cmdb_ci_business_app', column_label:'Configuration Item'},
	{name:'apm_application_profile_indicator', element:'apm_metric', column_label:'Indicator'},
	{name:'apm_application_profile_indicator', element:'apm_application_profile', column_label:'Profile'}
];
gs.info('APM : Update Fields Labels : start time ' + new GlideDateTime());
updateFieldLabels();
gs.info('APM : Update Fields Labels : end time ' + new GlideDateTime());

function updateFieldLabels() {
	fieldLabelChanges.forEach(function(item){
		var gr = new GlideRecord('sys_dictionary');
		gr.addQuery('element', item.element);
		gr.addQuery('name', item.name);
		gr.query();
		if(gr.next()) {
			gr.setValue('column_label', item.column_label);
			gr.update();
		} else {
			gs.info('APM : Update Fields Labels : [WARNING] unable to update label for table : '+ item.name + ' field : ' + item.element);
		}
	});
}

function updateTableLabels() {
	tableLabelChanges.forEach(function(item){
		var gr = new GlideRecord('sys_db_object');
		gr.addQuery('name', item.name);
		gr.query();
		if(gr.next()) {
			gr.setValue('label', item.label);
			gr.update();
		} else {
			gs.info('APM : Update Fields Labels : [WARNING] unable to update label for table : '+ item.name);
		}
	});
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2020-07-29 11:17:10&lt;/sys_created_on&gt;
        &lt;sys_id&gt;b820089c931032003706dfa5e57ffb49&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;16&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Update Fields Labels &lt;/sys_name&gt;
        &lt;sys_package display_value="Business Planner" source="com.snc.apm.business_planner"&gt;3fffcee747e64210cd4e1ce4316d43ce&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_b820089c931032003706dfa5e57ffb49&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2017-02-02 07:52:33&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 09:39:51</sys_created_on>
        <sys_id>fc05499583741210c6695855eeaad348</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Update Fields Labels </sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_fc05499583741210c6695855eeaad348</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 09:39:51</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
