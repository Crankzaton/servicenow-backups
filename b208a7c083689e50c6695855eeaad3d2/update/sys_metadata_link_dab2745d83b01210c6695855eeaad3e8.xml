<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>2ce99a7f731973004a905ee515f6a744</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Depending on how the CSM plugins are activated, this script may be needed to ensure that certain contextual search resources  have the proper solution definitions defined for them, (they may have been installed before the cxs_solution_definition column was defined).&lt;/description&gt;
        &lt;name&gt;Fix Search Resource Solution Definitions&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[// Map the CSM similarity search resource IDs to their solution definitions
var resSolutionDefs = {
  '48bcecc57f602300a8b1bdc8adfa9140':'cbea2f1053c40010d1dcddeeff7b12eb',
  '692e604d7f602300a8b1bdc8adfa91d1':'c7ea2f1053c40010d1dcddeeff7b12f1',
  'c34ea04d7f602300a8b1bdc8adfa91c2':'4bea2f1053c40010d1dcddeeff7b12e8'
};

var gr = new GlideRecord('cxs_search_res_config');

for (var key in resSolutionDefs) {
  if (gr.get(key) &amp;&amp; gs.nil(gr.getValue('ml_capability_definition'))) {
    gr.setValue('ml_capability_definition', resSolutionDefs[key]);
    gr.update();
  }
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2019-05-15 21:00:02&lt;/sys_created_on&gt;
        &lt;sys_id&gt;2ce99a7f731973004a905ee515f6a744&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Fix Search Resource Solution Definitions&lt;/sys_name&gt;
        &lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_2ce99a7f731973004a905ee515f6a744&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2019-05-15 21:00:02&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:19:56</sys_created_on>
        <sys_id>dab2745d83b01210c6695855eeaad3e8</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Fix Search Resource Solution Definitions</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_dab2745d83b01210c6695855eeaad3e8</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:19:56</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
