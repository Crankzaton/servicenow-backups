<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>94187f03539e21103c2cddeeff7b121f</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Set update_synch attribute flag to false on table  "sys_cs_typing_indicator" and it's corresponding record on table "sys_schema_attribute_m2m".&lt;/description&gt;
        &lt;name&gt;Set Update Synch Attribute to False&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[makeUpdateSyncFalse();

function makeUpdateSyncFalse() {
    var dbObjGr = new GlideRecord("sys_db_object");
    dbObjGr.addQuery("name=sys_cs_typing_indicator^super_classISNOTEMPTY");
    dbObjGr.query();
    //if the table schema is extending sys_metadata table
    if (dbObjGr.next()) {
        // Find the table's sys_id
        var typingIndicatorTable = new GlideRecord("sys_dictionary");
        typingIndicatorTable.addQuery("name", "sys_cs_typing_indicator");
        typingIndicatorTable.addQuery("element", "");
        typingIndicatorTable.query();
        if (!typingIndicatorTable.next() || typingIndicatorTable.hasNext()) {
            gs.warn('Searching for a single sys_cs_typing_indicator record in the ' +
                'sys_dictionary table failed. Not modifying update_sync attribute');
            return;
        }
        // Attributes are a comma separated list
        var attributes = typingIndicatorTable.getValue("attributes").split(",");
        for (var i = 0; i &lt; attributes.length; i++) {
            if (attributes[i].indexOf("update_synch") == 0) {
                attributes[i] = "update_synch=false";
                typingIndicatorTable.setValue("attributes", attributes.join(","));
                typingIndicatorTable.setWorkflow(false);
                typingIndicatorTable.update();
                break;
            }
        }
        // Find the table's update_synch attribute
        var updateSynchAttribute = new GlideRecord("sys_schema_attribute_m2m");
        updateSynchAttribute.addQuery("schema", typingIndicatorTable.getUniqueValue());
        // Update synch attribute sys_id is always the same
        updateSynchAttribute.addQuery("attribute", "eb8ce330eb321100d4360c505206feac");
        updateSynchAttribute.query();
        if (updateSynchAttribute.next()) {
            updateSynchAttribute.setValue("value", "false");
            updateSynchAttribute.setWorkflow(false);
            updateSynchAttribute.update();
        } else {
            updateSynchAttribute = new GlideRecord("sys_schema_attribute_m2m");
            updateSynchAttribute.setValue("schema", typingIndicatorTable.getUniqueValue());
            updateSynchAttribute.setValue("attribute", "eb8ce330eb321100d4360c505206feac");
            updateSynchAttribute.setValue("value", "false");
            updateSynchAttribute.setWorkflow(false);
            updateSynchAttribute.insert();
        }
    }
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2023-04-24 10:12:14&lt;/sys_created_on&gt;
        &lt;sys_id&gt;94187f03539e21103c2cddeeff7b121f&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Set Update Synch Attribute to False&lt;/sys_name&gt;
        &lt;sys_package display_value="Conversational Custom Chat Integration" source="com.glide.cs.custom.adapter"&gt;4e8d78203c75311068bcf327dfe37fd0&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_94187f03539e21103c2cddeeff7b121f&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2023-04-24 10:12:14&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:22:50</sys_created_on>
        <sys_id>2863f0dd83b01210c6695855eeaad3f1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Set Update Synch Attribute to False</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_2863f0dd83b01210c6695855eeaad3f1</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:22:50</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
