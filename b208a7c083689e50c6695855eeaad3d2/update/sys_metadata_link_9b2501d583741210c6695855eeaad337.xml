<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>cc2e41827307230098c91ad00ff6a723</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Suppress default email notifications in case of APM as APM will send its own custom email notifications. If the user has customized the consition field of default notifications then this script won't supress them.&lt;/description&gt;
        &lt;name&gt;Suppress default email notifications&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[var updateRecords = function(sys_id, old_cond, new_cond){
	var gr = new GlideRecord('sysevent_email_action');
	if(gr.get(sys_id)){
		if(gr.getValue('condition') == old_cond){
			gr.setValue('condition', new_cond);
			gr.update();
		}
	}
};

gs.info("starting first apm notification fix: 7a49682f0a00070465665c8c868055a1");
updateRecords('7a49682f0a00070465665c8c868055a1', 'assignment_groupISNOTEMPTY^EQ', 'assignment_groupISNOTEMPTY^cert_schedule.table!=cmdb_ci_business_app^EQ');

gs.info("finished first starting second fix: bbc82d880a0007040196e4b5f6aba013");
updateRecords('bbc82d880a0007040196e4b5f6aba013', 'assigned_toISNOTEMPTY^EQ', 'assigned_toISNOTEMPTY^cert_schedule.table!=cmdb_ci_business_app^EQ');

gs.info("finished second starting third fix: c0d469e2c3303000c111113e5bba8f3c");
updateRecords('c0d469e2c3303000c111113e5bba8f3c', 'assigned_toISNOTEMPTY^assigned_to.managerISNOTEMPTY^EQ', 'assigned_toISNOTEMPTY^assigned_to.managerISNOTEMPTY^cert_schedule.table!=cmdb_ci_business_app^EQ');

gs.info("finished third starting fourth fix: cd89e82d4741300042bd757f2ede276a");
updateRecords('cd89e82d4741300042bd757f2ede276a', null , 'cert_schedule.table!=cmdb_ci_business_app^EQ');

gs.info("finised all apm notification fixes");
]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2019-01-18 08:34:21&lt;/sys_created_on&gt;
        &lt;sys_id&gt;cc2e41827307230098c91ad00ff6a723&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Suppress default email notifications&lt;/sys_name&gt;
        &lt;sys_package display_value="Business Planner" source="com.snc.apm.business_planner"&gt;3fffcee747e64210cd4e1ce4316d43ce&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_cc2e41827307230098c91ad00ff6a723&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2019-01-18 08:34:21&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 09:40:35</sys_created_on>
        <sys_id>9b2501d583741210c6695855eeaad337</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Suppress default email notifications</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_9b2501d583741210c6695855eeaad337</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 09:40:35</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
