<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>1ef5f041eb7161109cfedf3c035228c1</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
    &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
        &lt;access&gt;public&lt;/access&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;api_name&gt;sn_config_hub.ConfigurationHubAceUtil&lt;/api_name&gt;
        &lt;caller_access/&gt;
        &lt;client_callable&gt;false&lt;/client_callable&gt;
        &lt;description/&gt;
        &lt;name&gt;ConfigurationHubAceUtil&lt;/name&gt;
        &lt;script&gt;&lt;![CDATA[var ConfigurationHubAceUtil = Class.create();
ConfigurationHubAceUtil.prototype = {
    initialize: function() {
        this.ACE_APP_CONFIG_TABLE_NAME = 'sn_ace_app_config';
        this.PAGE_REGISTRY_TABLE_NAME = 'sys_ux_page_registry';
        this.EXCLUDED_ACE_CONSOLES = [
            '1a418990530d0d10a86bddeeff7b1200', // App Builder
            'f0d91c8a87650110a4a2c077f6cb0b3e', // ACE Base Experience
            'f77d01e15b31011011ca51d11581c7ce', // Admin Center
        ];
    },

    getACEConsoles: function() {
        let aceConsoles = [];
        let aceConsolesGr = new GlideRecord(this.ACE_APP_CONFIG_TABLE_NAME);
        aceConsolesGr.addQuery('sys_id', 'NOT IN', this.EXCLUDED_ACE_CONSOLES.join(','));
        aceConsolesGr.orderBy('name');
        aceConsolesGr.query();
        while (aceConsolesGr.next()) {
            let name = aceConsolesGr.name.getDisplayValue();
            let urlPath = this._getAppConfigUrlPath(aceConsolesGr.app_config);
            if (name &amp;&amp; urlPath)
                aceConsoles.push({
                    name,
                    urlPath
                });
        }

        return aceConsoles;
    },

    _getAppConfigUrlPath: function(appConfigSysId) {
        let pageRegistryGr = new GlideRecord(this.PAGE_REGISTRY_TABLE_NAME);
        pageRegistryGr.addQuery('admin_panel', appConfigSysId);
        pageRegistryGr.query();
        if (!pageRegistryGr.hasNext())
            return null;

        pageRegistryGr.next();
        const urlPath = `/now/${pageRegistryGr.getValue('path')}`;

        return urlPath;
    },

    type: 'ConfigurationHubAceUtil'
};

/* Sample Usage

var chAceUtil = new ConfigurationHubAceUtil();

chAceUtil.getACEConsoles(); =&gt; [{name: 'ACE console 1',urlPath: '/now/ace-console-1'}]
*/]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;maint&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2023-03-23 18:25:00&lt;/sys_created_on&gt;
        &lt;sys_id&gt;1ef5f041eb7161109cfedf3c035228c1&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;ConfigurationHubAceUtil&lt;/sys_name&gt;
        &lt;sys_package display_value="Configuration Hub" source="sn_config_hub"&gt;2028fe718b11c8f32122c6da3b496a83&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Configuration Hub"&gt;2028fe718b11c8f32122c6da3b496a83&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_include_1ef5f041eb7161109cfedf3c035228c1&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;maint&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2023-03-23 19:34:03&lt;/sys_updated_on&gt;
    &lt;/sys_script_include&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:11:42</sys_created_on>
        <sys_id>a9d0b81983b01210c6695855eeaad33a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>ConfigurationHubAceUtil</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_a9d0b81983b01210c6695855eeaad33a</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:11:42</sys_updated_on>
        <tablename>sys_script_include</tablename>
    </sys_metadata_link>
</record_update>
