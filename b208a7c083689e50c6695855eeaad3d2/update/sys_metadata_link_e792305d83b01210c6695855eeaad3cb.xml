<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>1abfdf7b77323010129c478c4f5a9945</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Make sure user can only select ServiceNow scopes for the source scope is target scope is global. Also make sure that user can't select global scope as the target scope if source scope is not ServiceNow scope.&lt;/description&gt;
        &lt;name&gt;Add reference qualifiers for GRCA&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[function addQualifiers() {
    // add qualifier for source scope
    var gr = new GlideRecord("sys_dictionary");
    gr.addQuery("name", "sys_restricted_caller_access");
    gr.addQuery("element", "source_scope");
    gr.query();
    gr.next();
    gr.setValue("use_reference_qualifier", "advanced");
    gr.setValue("reference_qual", "javascript:new GlobalRCAScopeReferenceQualifier().sourceQualifier(current)");
    gr.update();

    // add qualifier for target scope
    gr = new GlideRecord("sys_dictionary");
    gr.addQuery("name", "sys_restricted_caller_access");
    gr.addQuery("element", "target_scope");
    gr.query();
    gr.next();
    gr.setValue("use_reference_qualifier", "advanced");
    gr.setValue("reference_qual", "javascript:new GlobalRCAScopeReferenceQualifier().targetQualifier(current)");
    gr.update();
}

addQualifiers();]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2021-10-02 00:25:26&lt;/sys_created_on&gt;
        &lt;sys_id&gt;1abfdf7b77323010129c478c4f5a9945&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;5&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Add reference qualifiers for GRCA&lt;/sys_name&gt;
        &lt;sys_package display_value="Scoped Application Restricted Caller Access" source="com.glide.scope.access.restricted_caller"&gt;6f2b38a03c35311068bcf327dfe37fd5&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_1abfdf7b77323010129c478c4f5a9945&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2021-10-02 00:35:51&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:19:29</sys_created_on>
        <sys_id>e792305d83b01210c6695855eeaad3cb</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Add reference qualifiers for GRCA</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_e792305d83b01210c6695855eeaad3cb</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:19:29</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
