<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>98616b9853e5d910fedfddeeff7b1213</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;This fix script is to revert back to old native mobile "Content Task" cards and old Mobile Content Section from the new cards  and record section shipped as part of Utah next experience. This script is only for the customers who have upgraded to Utah and want to go back to old mobile views.&lt;/description&gt;
        &lt;name&gt;Mobile Revert Next Exp - Cont Pub&lt;/name&gt;
        &lt;record_for_rollback&gt;true&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[//Switch runManually to true in order to run this script
var runManually = false;
if (runManually) {
    var util = new sn_me.MobileNextExpUpgradeUtil();
    revertMobileContentUISection();
    revertDelegateFunction();
    revertSignatureFunction();
    revertContentTaskCard();
}
//Revert from record section to "Mobile Content" content section
function revertMobileContentUISection() {
    var gr = new GlideRecord("sys_sg_applet_launcher_m2m_section");
    if (gr.get("c154ef33c7330010ec17148c95c260a3")) {
        if (gr.getValue("section") == "54c431fc77b111108f64b2487b5a99db") {
            gr.setValue("section", "78e9ecbbc7070010ec17148c95c260be");
            gr.update();
        }
    }
}

//Revert from new "Add a delegate" button to old "Add a delegate" button
function revertDelegateFunction() {
    var gr = new GlideRecord("sys_sg_button_instance");
    var addDelegateFunctionInstances = ['0f5ed4c0535320101fb2ddeeff7b12a8', '84cdd4c0535320101fb2ddeeff7b12d2', 'c0ae1cc0535320101fb2ddeeff7b122c', 'e92e54c0535320101fb2ddeeff7b12ab', 'fc4e1cc0535320101fb2ddeeff7b1231'];
    gr.addQuery("sys_id", "IN", addDelegateFunctionInstances);
    gr.query();
    while (gr.next()) {
        if (gr.getValue("button") == "9839c257771d11108f64b2487b5a9903") {
            gr.setValue("button", "943e0448531320101fb2ddeeff7b1211");
            gr.update();
        }
    }
}

//Revert from new "Sign" button to old "Sign" button
function revertSignatureFunction() {
    var gr = new GlideRecord("sys_sg_button_instance");
    var signatureFunctionInstances = ['48c44136b76a3300a251e556ee11a9e0', 'cc381fa6b7e63300a251e556ee11a971'];
    gr.addQuery("sys_id", "IN", signatureFunctionInstances);
    gr.query();
    while (gr.next()) {
        if (gr.getValue("button") == "7b651d8877a211109033bfeacf5a9901") {
            gr.setValue("button", "66689fa6b7e63300a251e556ee11a97b");
            gr.update();
        }
    }
}

function revertContentTaskCard() {
    var contentTasks = [
        //Content Task Button Complete To-do
        {
            "masterItem": "421eaea7c7623300264cc943c7c260f7",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_master_item"
        },
        //Content Task Play Video To-do
        {
            "masterItem": "aa283918b7323300264c2575de11a917",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_master_item"
        },
        //Content Task View Link To-do	
        {
            "masterItem": "c2fce2d7c7223300264cc943c7c2600b",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_master_item"
        },
        //Content Task E-Signature To-do for Knowledge Articles	
        {
            "masterItem": "d80cb4f2b76a3300a251e556ee11a938",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_master_item"
        },
        //Content Task E-Signature To-do for Managed Documents
        {
            "masterItem": "5e7ed466b7a63300a251e556ee11a94d",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_master_item"
        },
        //Complete To-Do
        {
            "masterItem": "67220fe7c7623300264cc943c7c2608b",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        },
        //Play Video Complete To-Do	
        {
            "masterItem": "f5b8f958b7323300264c2575de11a914",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        },
		//Task Delegates
		{
            "masterItem": "064fc1a8e7032010809a268b03f6a92b",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        },
		//Complete To-Do
        {
            "masterItem": "1f5d2e1eb7263300a251e556ee11a9a7",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        },
		//Complete To-Do
        {
            "masterItem": "338a78b2b76a3300a251e556ee11a98e",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        },
		//Complete To-Do
        {
            "masterItem": "66eee61bc7223300264cc943c7c260f5",
            "newCard": "1bca1023071a5110264f78e99cd30013",
            "table": "sys_sg_form_screen"
        }
    ];

    contentTasks.forEach(function revertEachLink(link) {
        util.switchLegacyView(link.table, link.masterItem, link.newCard, false);
    });
}]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2022-08-22 16:31:55&lt;/sys_created_on&gt;
        &lt;sys_id&gt;98616b9853e5d910fedfddeeff7b1213&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;32&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Mobile Revert Next Exp - Cont Pub&lt;/sys_name&gt;
        &lt;sys_package display_value=""&gt;b26210490b7203008cd6e7ae37673a6a&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value=""&gt;b26210490b7203008cd6e7ae37673a6a&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_98616b9853e5d910fedfddeeff7b1213&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2022-10-21 14:21:08&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;true&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:22:57</sys_created_on>
        <sys_id>5a6374dd83b01210c6695855eeaad344</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Mobile Revert Next Exp - Cont Pub</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_5a6374dd83b01210c6695855eeaad344</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:22:57</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
