<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>320f847cb3203300940d6ad4c6a8dcab</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;Migrate the existing flag which controls Dynamic Scheduling to use Google API or not into new property.
Migrate the existing flag which controls Route Optimization to use Google API or not into new property.&lt;/description&gt;
        &lt;name&gt;Use Google API Property Migration&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[// migrating for dynamic schedulign
// query copied from global.DynamicSchedulingProcessor
var configGR = new GlideRecord("dynamic_scheduling_config");
configGR.addQuery("task_table", "wm_task");
configGR.setLimit(1);
configGR.query();

if (configGR.next()){
	var use_google = configGR.use_google;
	if (use_google == false)
		gs.setProperty("work.management.travel.calculation.dynamic_scheduling", SMConstants.USE_STRAIGHT_LINE_ESTIMATE);
	else 
		gs.setProperty("work.management.travel.calculation.dynamic_scheduling", SMConstants.USE_GOOGLE_MAPS_API);
}


// migrating for route optimization
var geoProperty = gs.getProperty("work.management.autodispatch.geolocation", "true");
if (geoProperty=="false")
	gs.setProperty("work.management.travel.calculation.route_optimization", SMConstants.USE_STRAIGHT_LINE_ESTIMATE);
else 
	gs.setProperty("work.management.travel.calculation.route_optimization", SMConstants.USE_GOOGLE_MAPS_API);

	


]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2019-03-29 20:47:26&lt;/sys_created_on&gt;
        &lt;sys_id&gt;320f847cb3203300940d6ad4c6a8dcab&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Use Google API Property Migration&lt;/sys_name&gt;
        &lt;sys_package display_value=""&gt;25371ef01b8a21109c18a9f9bc4bcb1e&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_320f847cb3203300940d6ad4c6a8dcab&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2019-03-29 21:06:27&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:20:07</sys_created_on>
        <sys_id>b0c2385d83b01210c6695855eeaad394</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Use Google API Property Migration</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_b0c2385d83b01210c6695855eeaad394</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:20:07</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
