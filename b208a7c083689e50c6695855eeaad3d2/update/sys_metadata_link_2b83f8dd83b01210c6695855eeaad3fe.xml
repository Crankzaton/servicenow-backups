<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>acdcd54647130210cd4e1ce4316d43fc</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;working&amp;#13;
&amp;#13;
var gdt = new GlideDateTime(); //"2014-08-31 08:00:00"&amp;#13;
gdt.addSeconds(28800);&amp;#13;
gs.info(gdt);&amp;#13;
var gt = gdt.getTime();&amp;#13;
var timeStr = gt.getByFormat('HH:mm:ss'); // 24 hour format&amp;#13;
//var timeStr = gt.getByFormat('hh:mm:ss'); //12 hrs format&amp;#13;
var split = timeStr.split(":");&amp;#13;
var hour = split[0];&amp;#13;
gs.info(hour);&amp;#13;
/*&amp;#13;
if (today &amp;gt;= 7 &amp;amp;&amp;amp; today &amp;lt;= 19) {&amp;#13;
   document.body.style.background = "Red";&amp;#13;
} else {&amp;#13;
    document.body.style.background = "Blue";&amp;#13;
}*/&lt;/description&gt;
        &lt;name&gt;checkHrs&lt;/name&gt;
        &lt;record_for_rollback&gt;true&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[function getHrs(gdt) {
    var gt = gdt.getTime(); // extract time
    var timeStr = gt.getByFormat('HH:mm:ss'); // 24 hour format
    var split = timeStr.split(":");
    var hour = split[0]; //splitting the hours // today hours
    return hour;
}

//gs.info('UTC ' + gs.nowNoTZ());
//Extract today hours
var today = new GlideDateTime(); //"2014-08-31 08:00:00"
gs.info("UTC "+ today);
today.addSeconds(28800); //convert to HKT
gs.info("HKT "+ today);
var todayHrs = parseInt(getHrs(today));
var todayaddTwoHrs = todayHrs + 2; //adding two hours to check if it corssed 5PM HKT


//if (todayaddTwoHrs &gt;= 17) {

	//Taking time difference

var currTime = new GlideDate();
currDateTime = new GlideDateTime();
currDateTime.setValue(currTime + " " + "17:00:00");
gs.info("5pm HKT " +currDateTime);

var recTime = new GlideDateTime(); //record time
recTime.setValue("2024-07-12 13:20:00"); // pass the updated time
//recTime.addSeconds(28800);
gs.info(recTime);

var hktTime = currTime;
var balTime = gs.dateDiff(recTime,currDateTime); //past,current time difference

gs.info("balTime " + balTime);

var dur = new GlideDuration('0' + " " + balTime);
gs.info(dur.getDisplayValue());

//Taking time difference

//} 


]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2024-07-11 05:46:04&lt;/sys_created_on&gt;
        &lt;sys_id&gt;acdcd54647130210cd4e1ce4316d43fc&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;84&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;checkHrs&lt;/sys_name&gt;
        &lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_acdcd54647130210cd4e1ce4316d43fc&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2024-07-12 06:17:16&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:23:35</sys_created_on>
        <sys_id>2b83f8dd83b01210c6695855eeaad3fe</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>checkHrs</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_2b83f8dd83b01210c6695855eeaad3fe</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:23:35</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
