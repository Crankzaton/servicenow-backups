<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>6ee7635887602300ede6f64936cb0b68</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_fix"&gt;
    &lt;sys_script_fix action="INSERT_OR_UPDATE"&gt;
        &lt;before&gt;false&lt;/before&gt;
        &lt;description&gt;In Madrid, a new software_model_result column has been added to software_model_result. We will upgrade only the latest product results so that the new License Workbench will work with the customer's latest recon results. Though the License Workbench is available in samp, this new field has been added in sams like other recon result fields. So the upgrade script will also live in sams.&lt;/description&gt;
        &lt;name&gt;Set software model result display name&lt;/name&gt;
        &lt;record_for_rollback&gt;false&lt;/record_for_rollback&gt;
        &lt;script&gt;&lt;![CDATA[function getSoftwareModelResultDisplayName(softwareModelResultGr) {
	var LANGUAGE_ANYTHING = '832bec5493212200caef14f1b47ffb56';

	var softwareModel = new GlideRecord(ReconciliationConstants.SOFTWARE_MODEL_TABLE);
	softwareModel.get(softwareModelResultGr.getValue('software_model'));

	var platform = softwareModel.getValue('platform');
	platform = (!gs.nil(platform) &amp;&amp; platform !== 'anything') ? softwareModel.getDisplayValue('platform') : '';

	var language = softwareModel.getValue('language');
	language = (!gs.nil(language) &amp;&amp; language !== LANGUAGE_ANYTHING) ? softwareModel.getDisplayValue('language') : '';

	var displayName = [
		softwareModel.getDisplayValue('version'),
		softwareModel.getDisplayValue('edition'),
		softwareModel.getDisplayValue('named_user_type'),
		platform,
		language,
	].filter(function(v) { return !gs.nil(v); }).join(' ');
	if (gs.nil(displayName)) { displayName = gs.getMessage('Any Version and/or Edition'); }

	return displayName;
}

function upgradeSoftwareModelResults() {
	var softwareModelResultGr = new GlideAggregate('samp_software_model_result');
	softwareModelResultGr.addQuery('latest', true);
	softwareModelResultGr.addNullQuery('software_model_result');
	softwareModelResultGr.query();

	while (softwareModelResultGr.next()) {
		var displayName = getSoftwareModelResultDisplayName(softwareModelResultGr);

		softwareModelResultGr.setValue('software_model_result', displayName);
		softwareModelResultGr.setWorkflow(false);
		softwareModelResultGr.update();
	}
}

upgradeSoftwareModelResults();
]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_fix&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2018-09-11 02:55:57&lt;/sys_created_on&gt;
        &lt;sys_id&gt;6ee7635887602300ede6f64936cb0b68&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;Set software model result display name&lt;/sys_name&gt;
        &lt;sys_package display_value=""&gt;bd1f72f347213110020ba9f8536d43db&lt;/sys_package&gt;
        &lt;sys_policy/&gt;
        &lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_fix_6ee7635887602300ede6f64936cb0b68&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2019-12-23 06:19:32&lt;/sys_updated_on&gt;
        &lt;unloadable&gt;false&lt;/unloadable&gt;
    &lt;/sys_script_fix&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:21:50</sys_created_on>
        <sys_id>7d23389d83b01210c6695855eeaad3ee</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Set software model result display name</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_7d23389d83b01210c6695855eeaad3ee</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:21:50</sys_updated_on>
        <tablename>sys_script_fix</tablename>
    </sys_metadata_link>
</record_update>
