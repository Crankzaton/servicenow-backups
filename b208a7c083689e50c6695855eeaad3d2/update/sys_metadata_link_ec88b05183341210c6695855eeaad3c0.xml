<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>8d02b9200f603010e70a4abec4767ed6</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
    &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
        &lt;access&gt;package_private&lt;/access&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;api_name&gt;sn_mab_api.MobileTableInfoService&lt;/api_name&gt;
        &lt;caller_access/&gt;
        &lt;client_callable&gt;false&lt;/client_callable&gt;
        &lt;description/&gt;
        &lt;name&gt;MobileTableInfoService&lt;/name&gt;
        &lt;script&gt;&lt;![CDATA[var MobileTableInfoService = Class.create();
MobileTableInfoService.prototype = {
    initialize: function () {
        this.errorHandler = new sn_mab_api.ErrorHandler();
        this.validationHandler = new sn_mab_api.ValidationHandler();
		this.commonExcludedTables = ['sys_sg_action_screen',
            'sys_sg_filter_condition_attribute_name',
            'sys_sg_filter_condition_type',
            'sys_sg_function',
            'sys_sg_incremental_offline_exclusion_list',
            'sys_sg_incremental_result',
            'sys_sg_input_attribute',
            'sys_sg_input_choice',
            'sys_sg_input_type',
            'sys_sg_mock_json_response',
            'sys_sg_offline_download_schedule',
            'sys_sg_offline_result',
            'sys_sg_offline_result_m2m_mobile_responder',
            'sys_sg_redirect_dest_field',
            'sys_sg_request_log',
            'sys_sg_search_screen',
            'sys_sg_screen_field',
            'sys_sg_theme_style',
            'sys_sg_ui_rule_operation',
            'sys_sg_ui_rule_trigger',
            'sys_sg_variable_attribute',
            'sys_sg_view_element_attribute_name',
            'sys_sg_button_chat_launcher',
            'sys_sg_ui_element',
            'sys_sg_screen_m2m_ui_element',
            'sys_sg_source_ui_elements_mappings',
            'sys_sg_push_action_instance',
            'sys_sg_push_parameter_value',
            'sys_sg_push_action_category',
            'sys_sg_input_variable_param_map',
            'sys_sg_view_config_field',
            'sys_sg_section_attribute',
        ];
        this.whiteListedTables = ['sys_push_application', 'sys_certificate', 'sysevent_email_action'];
    },

    type: 'MobileTableInfoService',

    getSentenceCaseLabel: function (displayValue) {
        return displayValue.charAt(0) + displayValue.substring(1).toLowerCase();
    },
	
	getExcludedTables: function() {
		var sessionService = new sn_mab_api.SessionService();
        var familyVersion = sessionService.getFamilyVersion();
        // When "tokyo" gets deprecated, sys_sg_client_theme can be added to the commonExcludedTables list, and this variable can be removed
		var utahExcludedTables = this.commonExcludedTables.concat('sys_sg_client_theme');
		var excludedTablesVersionMap = {
			'tokyo': this.commonExcludedTables,
			'utah': utahExcludedTables,
            'vancouver': utahExcludedTables
		};
		// return utahExcludedTables[] for Utah and later versions
		return excludedTablesVersionMap[familyVersion] || utahExcludedTables;
	},

    getMobileTableNamesAndLabels: function () {
        var result = [];
        /* we use glideRecord rather then glideRecordSecure
        ** because we want to provide the list of all tables w/o
        ** restricting the list of tables based on user ACLs
        */
        var gr = new GlideRecord('sys_db_object');
		var excludedTables = this.getExcludedTables();
        gr.addQuery('name', 'STARTSWITH', 'sys_sg_').addOrCondition('name', 'IN', this.whiteListedTables);
        gr.addQuery('name', 'NOT IN', excludedTables);
        // for sys_db_object, if the column doesn't have a name or has an element then it is not a table we want to return
        gr.addNullQuery('element');
        gr.addNotNullQuery('name');
        gr.orderBy('label');
        gr.query();

        while (gr.next()) {
            var tableInfo = { 'label': this.getSentenceCaseLabel(gr.getDisplayValue()), 'value': gr.getValue('name') };
            result.push(tableInfo);
        }

        return result;
    },
};
]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2021-06-01 17:38:25&lt;/sys_created_on&gt;
        &lt;sys_id&gt;8d02b9200f603010e70a4abec4767ed6&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;42&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;MobileTableInfoService&lt;/sys_name&gt;
        &lt;sys_package display_value="Mobile App Builder API" source="sn_mab_api"&gt;3c64259bc7812010100f2f3bf4c2609a&lt;/sys_package&gt;
        &lt;sys_policy&gt;read&lt;/sys_policy&gt;
        &lt;sys_scope display_value="Mobile App Builder API"&gt;3c64259bc7812010100f2f3bf4c2609a&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_include_8d02b9200f603010e70a4abec4767ed6&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2022-05-18 09:19:46&lt;/sys_updated_on&gt;
    &lt;/sys_script_include&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:45:13</sys_created_on>
        <sys_id>ec88b05183341210c6695855eeaad3c0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>MobileTableInfoService</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_ec88b05183341210c6695855eeaad3c0</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:45:13</sys_updated_on>
        <tablename>sys_script_include</tablename>
    </sys_metadata_link>
</record_update>
