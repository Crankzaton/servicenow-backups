<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>update</directory>
        <documentkey>0abe3dba7770211095417f7c8c5a9928</documentkey>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
    &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
        &lt;access&gt;package_private&lt;/access&gt;
        &lt;active&gt;true&lt;/active&gt;
        &lt;api_name&gt;sn_mobile_card_bui.McbResultFormatter&lt;/api_name&gt;
        &lt;caller_access/&gt;
        &lt;client_callable&gt;false&lt;/client_callable&gt;
        &lt;description&gt;These are a collection of json format values used to change the returned data set for MCB endpoints. This is a placeholder formatter until all FE endpoints are updated to accept full payloads w/o modifications&lt;/description&gt;
        &lt;name&gt;McbResultFormatter&lt;/name&gt;
        &lt;script&gt;&lt;![CDATA[var McbResultFormatter = Class.create();
McbResultFormatter.prototype = {
  initialize: function (McbResultFormat) {
    this.format = McbResultFormat;
  },

  /*
   * This function will format a field, {name, value}, object based on the
   * formatting guid passed in during class instantiation.
   *
   * INPUT
   * field: {name, value} object of a glide record element
   * table: name of the table the field exists on
   *
   * RETURN
   * {name, value}: a modified field value based on this.format
   */
  formatField: function (field, table) {
    if (!this.format.hasOwnProperty(table)) return field;
    if (!this.format[table].hasOwnProperty(field.name)) return field;

    var result = field;
    var fieldMetaData = this.format[table][field.name];

    if (fieldMetaData.hasOwnProperty("returnName")) {
      result.name = fieldMetaData["returnName"];
    }
    if (fieldMetaData.hasOwnProperty("returnType")) {
      if (fieldMetaData["returnType"] === "boolean") {
        result.value = Boolean(Number(field.value));
      }
    }
    if (fieldMetaData.hasOwnProperty("isExcluded")) {
      if (fieldMetaData["isExcluded"]) {
        result = null;
      }
    }

    return result;
  },

  /*
   * A boolean check to determin if the result should or should not use the display value
   *
   * INPUT
   * fieldName: name of the field on the table
   * table: name of the table the hm is associated to
   *
   * RETURN
   * bool: an indicator of if the value formatted will be the display value
   */
  shouldFormatWithDisplayValue: function (fieldName, table) {
    if (!this.format.hasOwnProperty(table)) return false;
    if (!this.format[table].hasOwnProperty(fieldName)) return false;

    var fieldMetaData = this.format[table][fieldName];
    if (!fieldMetaData.hasOwnProperty("returnDisplayValue")) return false;

    return fieldMetaData["returnDisplayValue"];
  },

  /*
   * Constructs a hashmap to be used for the table
   * This includes default field values.
   *
   * INPUT
   * table: name of the table the hm is associated to
   *
   * RETURN
   * {}: a hashmap with field default fields for formats with the defaultValue property
   */
  formattedDefaultHashmap: function (table) {
    hm = {};
    if (!this.format.hasOwnProperty(table)) return hm;

    var tableMetaData = Object.keys(this.format[table]);

    for (var i = 0; i &lt; tableMetaData.length; i++) {
      var fieldName = tableMetaData[i];
      var fieldMetaData = this.format[table][fieldName];
      if (fieldMetaData.hasOwnProperty("defaultValue")) {
        hm[fieldName] = fieldMetaData["defaultValue"];
      }
    }

    return hm;
  },

  /*
   * Helper function, to look up the replaced name for a given field
   *
   * This was included to help keep track of the sys_id field if it was ever changed.
   *
   * INPUT
   * table: name of the table the field exists on
   * defaultFieldName: the original name of the field to look up
   *
   * RETURN
   * String: the modified name of the field
   */
  getReplacedFieldName: function (table, defaultFieldName) {
    if (!this.format.hasOwnProperty(table)) return defaultFieldName;
    if (!this.format[table].hasOwnProperty(defaultFieldName))
      return defaultFieldName;
    if (!this.format[table][defaultFieldName].hasOwnProperty("returnName"))
      return defaultFieldName;

    return this.format[table][defaultFieldName]["returnName"];
  },

  type: "McbResultFormatter",
};
]]&gt;&lt;/script&gt;
        &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
        &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
        &lt;sys_created_on&gt;2023-02-07 17:11:29&lt;/sys_created_on&gt;
        &lt;sys_id&gt;0abe3dba7770211095417f7c8c5a9928&lt;/sys_id&gt;
        &lt;sys_mod_count&gt;59&lt;/sys_mod_count&gt;
        &lt;sys_name&gt;McbResultFormatter&lt;/sys_name&gt;
        &lt;sys_package display_value="Mobile Card Builder" source="sn_mobile_card_bui"&gt;012fa9ad7367ad6393ae5dea97af6f65&lt;/sys_package&gt;
        &lt;sys_policy&gt;read&lt;/sys_policy&gt;
        &lt;sys_scope display_value="Mobile Card Builder"&gt;012fa9ad7367ad6393ae5dea97af6f65&lt;/sys_scope&gt;
        &lt;sys_update_name&gt;sys_script_include_0abe3dba7770211095417f7c8c5a9928&lt;/sys_update_name&gt;
        &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
        &lt;sys_updated_on&gt;2023-03-01 17:36:04&lt;/sys_updated_on&gt;
    &lt;/sys_script_include&gt;
&lt;/record_update&gt;
</payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-21 08:09:45</sys_created_on>
        <sys_id>4560f49583b01210c6695855eeaad3b4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>McbResultFormatter</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_metadata_link_4560f49583b01210c6695855eeaad3b4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-21 08:09:45</sys_updated_on>
        <tablename>sys_script_include</tablename>
    </sys_metadata_link>
</record_update>
