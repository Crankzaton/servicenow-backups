<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <before>false</before>
        <description/>
        <name>audit format</name>
        <record_for_rollback>true</record_for_rollback>
        <script><![CDATA[/*
<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
<g2:evaluate var="jvar_existflag">        
        var existflag = false;
		var data = current.u_audit_history;
		if (data!=''){existflag = true;}
        existflag;
</g2:evaluate>
<j2:if test="$[jvar_existflag == false]">		
<div>No History Available</div>
</j2:if>
<j2:if test="$[jvar_existflag == true]">
<style>
  th {
    background-color: #f2f2f2;
  }

  tr:nth-child(even) {
    background-color: #f2f2f2;
  }
</style>
<table style="text-align:center; border-collapse: collapse; width: 100%;">
  <tr>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Trade Life Cycle Status	</th>
	<th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Trade Cash and Stock Status</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Legacy Status</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Legacy Sub-Status</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Cash Hold Indicator</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Scrip Hold Indicator</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">GDI Indicator</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Source System</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Source System Timestamp (GMT)</th>
    <th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Reason Code</th>
	<th style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">Reason Description</th>
  </tr>
  <g2:evaluate var="jvar_data" object="true">
	function sortByTimestamp(arr) {
  		return arr.sort(function(a, b) {
    	var dateA = new GlideDateTime(a.sourceSystemTimestamp).getNumericValue();
    	var dateB = new GlideDateTime(b.sourceSystemTimestamp).getNumericValue();
    	return dateA - dateB;
  	});}
	
	var unsorteddata=JSON.parse(current.u_audit_history);
	var data=sortByTimestamp(unsorteddata);
	data;	
  </g2:evaluate>
  <j2:forEach var="jvar_row" items="$[jvar_data]">
  <tr>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.eventStatusCore]</td>
	<td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.eventStatusStock]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.legacyStatus]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.legacySubStatus]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.cashHoldIndicator]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.scriptHoldIndicator]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.gdiIndicator]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.sourceSystem]</td>
    <td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.sourceSystemTimestamp]</td>
	<td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.reasonCode]</td>
	<td style="white-space: pre border: 1px solid #dddddd;  text-align: center;  padding: 8px;">$[jvar_row.reasondescription]</td>
  </tr>
  </j2:forEach>
</table>
</j2:if>
</j:jelly>
*/]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-11-09 15:44:37</sys_created_on>
        <sys_id>fc5eee8983751210c6695855eeaad302</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>audit format</sys_name>
        <sys_package display_value="Now Utils" source="x_938076_now_utils">b208a7c083689e50c6695855eeaad3d2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Now Utils">b208a7c083689e50c6695855eeaad3d2</sys_scope>
        <sys_update_name>sys_script_fix_fc5eee8983751210c6695855eeaad302</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-11-09 15:44:37</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
